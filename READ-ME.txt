# ğŸ“‹ DocumentaÃ§Ã£o do Agente Consultor de PIs e PDDs

## ğŸ¯ VisÃ£o Geral

Este workflow implementa um Agente de IA especializado em consultar e analisar Product Increments (PIs) e Program Design Documents (PDDs). 
O agente atua como consultor estratÃ©gico, combinando mÃºltiplas ferramentas para oferecer orientaÃ§Ã£o contextualizada, recuperaÃ§Ã£o inteligente de dados e anÃ¡lises aprofundadas.

## ğŸ’¼ Contexto de NegÃ³cio

Este agente foi projetado para apoiar:
- PMs
- Agile Coaches
- LÃ­deres de Engenharia
- Stakeholders executivos

em organizaÃ§Ãµes que operam com:
- SAFe / Agile em escala
- Planejamento por Product Increments
- DocumentaÃ§Ã£o extensa de PDDs

---

## ğŸ—ï¸ Arquitetura do Workflow

### Componentes Principais

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  When chat message received  â†’  AI Agent  â†’  Response       â”‚
â”‚                                    â†“                        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚                    â†“               â†“               â†“        â”‚
â”‚              [Model]         [Memory]         [Tools]       â”‚
â”‚                    â†“               â†“               â†“        â”‚
â”‚            OpenAI Chat    Postgres Chat    MCP Client       â”‚
â”‚              Model           Memory                         â”‚
â”‚                                             Supabase        â”‚
â”‚                                          Vector Store       â”‚
â”‚                                         + Embeddings        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

---

## ğŸ§ª Exemplo de Uso

Pergunta do usuÃ¡rio:
"Compare os objetivos do PI-2024-Q3 e Q4"

O agente:
1. Identifica consulta comparativa
2. Usa MCP Server para buscar ambos os PIs
3. Analisa objetivos e diferenÃ§as
4. Retorna insights estratÃ©gicos e riscos

---

## ğŸ“ˆ BenefÃ­cios Esperados

- ReduÃ§Ã£o do tempo de busca por PIs: ~70%
- Menos dependÃªncia de especialistas humanos
- PadronizaÃ§Ã£o da interpretaÃ§Ã£o de documentos
- AceleraÃ§Ã£o de decisÃµes estratÃ©gicas

---

## ğŸ”§ Ferramentas e IntegraÃ§Ãµes

### 1ï¸. OpenAI Chat Model
- FunÃ§Ã£o: Motor de inteligÃªncia do agente
- Modelo: GPT-4.1
- Responsabilidade: Processamento de linguagem natural, anÃ¡lise contextual e geraÃ§Ã£o de respostas consultivas

### 2ï¸. **Postgres Chat Memory
- FunÃ§Ã£o: MemÃ³ria persistente conversacional
- Armazenamento: HistÃ³rico de interaÃ§Ãµes do usuÃ¡rio
- BenefÃ­cio: MantÃ©m contexto entre sessÃµes, personaliza atendimento e evita buscas redundantes

### 3ï¸. MCP Client + MCP Server
- FunÃ§Ã£o: Servidor de ferramentas para consultas estruturadas
- Modalidades:
  - Busca Global por parÃ¢metro: Retorna todos os PIs/PDDs da base
  - Busca por Chave: Retorna documento especÃ­fico (ex: PI-2024-Q3)
- ImplementaÃ§Ã£o: 2 endpoints HTTP Request conectados ao MCP Server
- Uso: Consultas diretas e estruturadas quando usuÃ¡rio fornece identificadores ou solicita listagens completas

### 4ï¸. Supabase Vector Store
- FunÃ§Ã£o: Base de conhecimento semÃ¢ntica
- Tabela: `documents`
- Query: `match_documents`
- Tecnologia: Busca vetorial por similaridade (embeddings)
- Uso: Consultas contextuais, exploratÃ³rias e temÃ¡ticas sem chave especÃ­fica
- Retorno: AtÃ© 4 documentos mais relevantes por consulta

### 5ï¸. Embeddings OpenAI
- FunÃ§Ã£o: GeraÃ§Ã£o de vetores para busca semÃ¢ntica
- IntegraÃ§Ã£o: Supabase Vector Store
- Modelo: text-embedding-ada-002 ou superior

---

## ğŸ­ Papel do Agente

### Identidade
Consultor Especializado em PIs e PDDs com expertise em:
- Metodologias Ã¡geis escaladas
- Planejamento estratÃ©gico de produtos
- DocumentaÃ§Ã£o tÃ©cnica empresarial
- AnÃ¡lise de dependÃªncias e riscos

### Responsabilidades

âœ… Consultoria e OrientaÃ§Ã£o
- Explicar conceitos de PIs/PDDs de forma clara
- Contextualizar informaÃ§Ãµes no framework Ã¡gil
- Identificar relaÃ§Ãµes e dependÃªncias entre documentos
- Alertar sobre riscos e inconsistÃªncias

âœ… RecuperaÃ§Ã£o Inteligente
- Buscar informaÃ§Ãµes usando a ferramenta apropriada
- Organizar dados de forma estruturada
- Citar sempre a fonte das informaÃ§Ãµes
- Manter contexto de buscas anteriores

âœ… AnÃ¡lise EstratÃ©gica
- Identificar padrÃµes e tendÃªncias
- Conectar informaÃ§Ãµes de diferentes documentos
- Oferecer insights alÃ©m dos dados brutos
- Sugerir prÃ³ximos passos e anÃ¡lises complementares

---

## ğŸ”„ Fluxo de OperaÃ§Ã£o

### 1. RecepÃ§Ã£o da Mensagem
UsuÃ¡rio envia pergunta via Chat do n8n

### 2. Processamento pelo Agente
O AI Agent analisa a intenÃ§Ã£o e decide a estratÃ©gia:

Se a consulta for estruturada (com chave/cÃ³digo especÃ­fico):
```
â†’ MCP Client â†’ HTTP Request (Busca Individual) â†’ Retorna documento especÃ­fico
```

Se a consulta for de listagem completa:
```
â†’ MCP Client â†’ HTTP Request (Busca Global) â†’ Retorna todos os documentos
```

Se a consulta for contextual/temÃ¡tica (sem chave):
```
â†’ Supabase Vector Store â†’ Busca semÃ¢ntica â†’ Retorna documentos relevantes
```

### 3. AnÃ¡lise e ContextualizaÃ§Ã£o
- Postgres Memory fornece contexto de interaÃ§Ãµes anteriores
- OpenAI Model processa e analisa os dados recuperados
- Agente agrega valor consultivo aos dados brutos

### 4. Resposta ao UsuÃ¡rio
ApresentaÃ§Ã£o estruturada com:
- Dados solicitados organizados hierarquicamente
- AnÃ¡lise contextual e insights
- IdentificaÃ§Ã£o de riscos/oportunidades
- SugestÃµes de prÃ³ximos passos

---

## ğŸ”‘ Credenciais NecessÃ¡rias

### PostgreSQL
- **Uso**: Armazenamento de memÃ³ria conversacional
- **ConfiguraÃ§Ã£o**: Host, porta, database, usuÃ¡rio, senha

### Supabase
- **Uso**: Vector Store (base de conhecimento)
- **ConfiguraÃ§Ã£o**: URL do projeto, API Key (service_role)
- **Tabela prÃ©-configurada**: `documents` com funÃ§Ã£o `match_documents`

### OpenAI
- **Uso**: Modelo de chat + geraÃ§Ã£o de embeddings
- **ConfiguraÃ§Ã£o**: API Key
- **Modelos**: GPT-4 (chat) + text-embedding-ada-002 (embeddings)

---

## ğŸ¨ Estilo de ComunicaÃ§Ã£o

### Tom
- **Profissional mas acessÃ­vel**
- **Objetivo e direto**
- **EmpÃ¡tico e prestativo**
- **Confiante mas transparente sobre limitaÃ§Ãµes**

### FormataÃ§Ã£o
- Respostas estruturadas com tÃ­tulos e seÃ§Ãµes
- Uso de emojis para categorizaÃ§Ã£o visual (ğŸ“Š ğŸ“ˆ âš ï¸ âœ…)
- Listas e tabelas quando apropriado
- CitaÃ§Ã£o clara da fonte dos dados

### Abordagem Consultiva
- NÃ£o apenas fornece dados, mas **explica significado**
- **Antecipa necessidades** relacionadas
- **Identifica riscos** proativamente
- **Sugere prÃ³ximos passos** estratÃ©gicos

---

## âš™ï¸ ConfiguraÃ§Ãµes Importantes

### Supabase Vector Store
- **Limit**: 4 documentos por consulta
- **Include Metadata**: âœ… Habilitado
- **Rerank Results**: âŒ Desabilitado (opcional)

### MCP Server
- **Endpoints configurados**: 2 (busca global + busca individual)
- **Protocolo**: HTTP Request
- **Formato de resposta**: JSON

### AI Agent
- **Model**: OpenAI GPT-4
- **Memory**: Postgres (sessÃµes persistentes)
- **Tools**: MCP Client + Supabase Vector Store
- **System Prompt**: Prompt estruturado detalhado definindo papel consultivo

---

## ğŸ“ Suporte

Para dÃºvidas sobre configuraÃ§Ã£o, consulte:
- DocumentaÃ§Ã£o do n8n: https://docs.n8n.io
- DocumentaÃ§Ã£o do Supabase: https://supabase.com/docs
- OpenAI API Reference: https://platform.openai.com/docs

---

**VersÃ£o**: 1.3  
**Ãšltima atualizaÃ§Ã£o**: Dezembro 2025  
**Criado e Mantido por**: Daniel Santos