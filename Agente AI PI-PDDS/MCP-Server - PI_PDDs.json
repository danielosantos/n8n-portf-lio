{
  "name": "MCP-Server - PI/PDDs",
  "nodes": [
    {
      "parameters": {
        "path": "busca_pi_pdds"
      },
      "type": "@n8n/n8n-nodes-langchain.mcpTrigger",
      "typeVersion": 2,
      "position": [
        0,
        0
      ],
      "id": "81abfef0-5237-489d-b8a3-48e7e123a58d",
      "name": "MCP Server Trigger",
      "webhookId": "9a6b3ca3-7897-4d72-8953-19851200ba8f"
    },
    {
      "parameters": {
        "toolDescription": "Executa busca direcionada que retorna UM documento específico baseado na chave/identificador fornecido pelo usuário. Use esta requisição quando o usuário mencionar: código específico de PI/PDD (ex: PI-2024-Q3, PDD-Atlas), nome exato de projeto, identificador único, ou qualquer referência direta a um documento conhecido. Requer que você extraia e forneça a CHAVE EXATA como parâmetro da requisição. Retorna informações completas e detalhadas do documento correspondente (título, objetivos, status, equipe, cronograma, dependências, riscos, conteúdo completo). QUANDO USAR: perguntas como \"busque o PI-2024-Q3\", \"mostre o PDD do projeto Phoenix\", \"detalhes do PI-ENG-Q4\". SEMPRE confirme a chave com o usuário se houver ambiguidade antes de executar a busca.",
        "method": "POST",
        "url": "URL SUPABASE",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer [KEY HERE]"
            },
            {
              "name": "apikey",
              "value": "[KEY HERE]"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "p_key",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `Chave específica para qual será realizado a pesquisa dentro da base de conhecimento fornecida inicialmente pelo usuário.`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -80,
        224
      ],
      "id": "480cceac-8ff4-4188-87d7-4aa364a62cc2",
      "name": "Busca INDIVIDUAL por Chave"
    },
    {
      "parameters": {
        "toolDescription": "Executa busca global que retorna TODOS os documentos de PIs e PDDs cadastrados na base de dados. Use esta requisição quando o usuário solicitar: listagem completa de documentos, visão geral da base, todos os PIs/PDDs disponíveis, documentos por período (sem chave específica), ou quando o usuário não souber quais códigos/chaves existem. Retorna lista completa com metadados básicos de cada documento (ID, título, tipo, data, status). QUANDO USAR: perguntas como \"mostre todos os PIs\", \"quais PDDs temos\", \"liste documentos de 2024\", \"quantos PIs existem\". NÃO USE quando o usuário fornecer código/chave específica (ex: PI-2024-Q3) - nesses casos use a busca individual.",
        "method": "POST",
        "url": "URL SUPABASE",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer [KEY HERE]"
            },
            {
              "name": "apikey",
              "value": "[KEY HERE]"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "p_key",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `Parâmetro inicial fornecido pelo usuário inicialmente. `, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        368,
        224
      ],
      "id": "d8099d83-2047-4936-b7ae-df817a767790",
      "name": "BUSCA Global por parâmetro"
    },
    {
      "parameters": {
        "content": "## Nó de Busca por chave.\n\nExecuta busca direcionada que retorna UM documento específico baseado na chave/identificador fornecido pelo usuário.",
        "height": 240,
        "width": 448
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -688,
        160
      ],
      "typeVersion": 1,
      "id": "2566efaa-4df1-432c-8487-543b3391fd44",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Nó de Busca Global por parâmetro.\n\nExecuta busca global que retorna TODOS os documentos de PIs e PDDs cadastrados na base de dados. ",
        "height": 240,
        "width": 448,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        592,
        160
      ],
      "typeVersion": 1,
      "id": "0d0646e4-bd57-4810-97ee-cd2ac59253c0",
      "name": "Sticky Note1"
    }
  ],
  "pinData": {},
  "connections": {
    "Busca INDIVIDUAL por Chave": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "BUSCA Global por parâmetro": {
      "ai_tool": [
        [
          {
            "node": "MCP Server Trigger",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "64ff9c64-6327-4480-802a-58829ce7d4a8",
  "meta": {
    "instanceId": "85b289b18d26648fefa8c4cfe398240a9bb5a2160b6a8d46e50adfc5d6c26692"
  },
  "id": "DLiJvuxWPiJJtqKg",
  "tags": []
}